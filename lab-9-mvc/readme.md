## Упражнение 9
### Разработка простейшего приложения с использованием Spring 3 MVC
#### Проект
_lab-9-mvc_
#### Кодовая база
_lab-9-mvc_
#### Цели упражнения
Создать минимальное работоспособное приложение с использованием каркаса Spring 3
MVC.
#### Описание
Любое приложение, работающее на Spring MVC, должно иметь несколько обязательных
элементов. В дескрипторе приложения необходимо зарегистрировать хотя бы один
`DispatcherServlet` и определить обрабатываемые им запросы. Также нужно
зарегистрировать «слушатель» типа `ContextLoaderListener` для инициализации
контекста Spring.
Чтобы увидеть работу приложения, нужно создать контроллеры и представления. Для
каждого контроллера нужно определить обрабатываемые им запросы. Для представлений
нужно задать стратегию сопоставления строковых имён самим представлениям.
##### Задачи упражнения
1. Изучить имеющееся приложение, выделить все имеющиеся в нем компоненты и
изучить их;
2. Доработать имеющееся приложение таким образом, чтобы у приложения появилась
возможность выполнить аналогичные операции для сущности `Country` (см. предыдущие
упражнения);
#### Подробное руководство
##### Часть 1
1. Убедиться в том, что системная переменная `$CATALINA_HOME` задана и
указывает на директорию в которую предустановлен сервелет-контейнер
TomCat. Для этого в командной строке ввести следующую команду: `echo
$CATALINA_HOME`, ее вывод должен указывать на `~/bin/tomcat`
2. В Eclipse откройте окно управления сборкой приложения Window → Show view -> Ant  
![Eclipse Ant Window](images/1.jpg)
3. Выберете таржет «deploy» и запустите его на выполнение;
4. После успешной сборки приложения запустите сервлет-контейнер TomCat;
5. Откройте браузер и укажите в адресной строке следующий url:
http://localhost:8080/lab-9-mvc/adduser.form
6. Если все предыдущие шаги были выполнены вами правильно вы должны будете
увидеть следующую форму:  
![User Form](images/2.jpg)
7. Заполните поля формы и кликните на кнопку [Save Changes]
8. Если все было сделано правильно, вы должны будете увидеть следующий экран:  
![User Form Result](images/3.jpg)
9. Повторить п.6,7 указав в качестве данных пустые поля и поля длиной менее 2-х
символов. Какой результат вы получили?
10. Изучите внимательно все артифакты проекта и диаграмму зависимостей mvc-
компонент:  
![MVC Component](images/4.jpg)
Ответить на следующие вопросы:
1. В каком артифакте описаны все бины данного приложения?
2. На какой контроллер передается управление при обраотке адреса
[http://localhost:8080/lab-9-mvc/adduser.form](http://localhost:8080/lab-9-mvc/adduser.form) и почему?
3. Как в данный момент обрабатывается адрес [http://localhost:8080/lab-9-mvc/](http://localhost:8080/lab-9-mvc/) и
почему? Как можно изменить это поведение?
4. Почему если запрос приходит из браузера с использованием метода GET
выполнение передается на `adduserform.jsp`, а при использовании метода
POST управление может вернуться как на `adduserform.jsp`, так и на
`userlistview.jsp`?
5. Каким образом происходит проверка правильности заполнения полей формы?
##### Часть 2
Разработать следующие артифакты:
1. `lab.dao.CountryDao`;
2. `lab.dao.HsqlCountryDao`;
3. `lab.domain.Country`;
4. `lab.mvc.form.bean.CountryFormBean`;
5. `lab.mvc.CountryFormController`;
6. `web/WEB-INF/views/addcountryform.jsp`;
7. `web/WEB-INF/views/countrylistview.jsp`;
#### Подробное руководство
1. Воспользовавшись кодовой базой предыдущей части упражнения и разработав
вышеуказанные артифакты, выполнить сборку приложения;
2. Запустить сервлет-контейнер TomCat, указать в адресной строке браузера:
[http://localhost:8080/lab-9-mvc/addcountry.form](http://localhost:8080/lab-9-mvc/addcountry.form);
3. Убедиться в том, что приложение успешно сохраняет добавленную информацию
о стране в базе данных;